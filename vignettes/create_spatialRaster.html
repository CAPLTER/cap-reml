<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="S. Earl" />

<meta name="date" content="2017-09-29" />

<title>create_spatialRaster</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">create_spatialRaster</h1>
<h4 class="author"><em>S. Earl</em></h4>
<h4 class="date"><em>2017-09-29</em></h4>



<div id="detail-raster-metdata" class="section level2">
<h2>detail raster metdata</h2>
<p>For each raster, generate a separate metadata file to detail critical information about the raster. Note that the raster file name should be provided as unquoted text, and the file (or files) should be in the directory specified when calling the create_spatialRaster function.</p>
<table>
<thead>
<tr class="header">
<th align="left">metadata_entity</th>
<th align="left">metadata_entity_description</th>
<th align="left">metadata_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">rasterName</td>
<td align="left">name of the raster file (e.g. CAP_1985.img)</td>
<td align="left">CAP_1985.img</td>
</tr>
<tr class="even">
<td align="left">rasterDescription</td>
<td align="left">provide a description of the raster data</td>
<td align="left">land use and land cover (LULC) map of the CAP LTER study based on 1985 Landsat imagery</td>
</tr>
<tr class="odd">
<td align="left">rasterValueLabel</td>
<td align="left">brief label applied to raster attribute (e.g. categorical raster cell value)</td>
<td align="left">categorical raster cell value</td>
</tr>
<tr class="even">
<td align="left">rasterValueDescription</td>
<td align="left">brief description of the raster attribute</td>
<td align="left">categorical value of raster as it relates to a defined land use land cover (LULC) type</td>
</tr>
<tr class="odd">
<td align="left">horizontalAccuracy</td>
<td align="left">quantitative estimate expressed in the units of the coordinate system or as a text assessment</td>
<td align="left">METADATA_NOT_PROVIDED</td>
</tr>
<tr class="even">
<td align="left">verticalAccuracy</td>
<td align="left">quantitative estimate expressed in the units of the height or depth measurement system or as a text assessment</td>
<td align="left">METADATA_NOT_PROVIDED</td>
</tr>
<tr class="odd">
<td align="left">rasterOrigin</td>
<td align="left">the corner of the grid where the first values for both the x and y axes begin in the file</td>
<td align="left">Upper Left</td>
</tr>
<tr class="even">
<td align="left">verticals</td>
<td align="left">maximum number of raster objects along the vertical (z) axis</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">cellGeometry</td>
<td align="left">indication of whether the cell value is representative of a single point (matrix) within the cell or the entire cell (pixel)</td>
<td align="left">pixel</td>
</tr>
</tbody>
</table>
<div id="categorical-raster-values" class="section level3">
<h3>categorical raster values</h3>
<p>If the raster values are categorical, generate a metadata file to catalog the unique raster value categories and their meaning. Additional metadata about the categories can be provided at the data set level.</p>
<table>
<thead>
<tr class="header">
<th align="right">rasterValue</th>
<th align="left">categoryName</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Water</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Asphalt/Road</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Concrete/Buildings</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Urban mixture</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Residential</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Residential (white rooftops)</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="left">Active crop</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="left">Inactive crop</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="left">Cultivated vegetation</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="left">Natural vegetation</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="left">Soil/Desert</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="call-the-function" class="section level2">
<h2>call the function</h2>
<p>Call the create_spatialRaster function to generate the EML to describe the raster. Arguments include the quoted path to the raster file (or files), the quoted path and name of the raster metadata file, and the quoted path and name of the raster value categories (if needed). Output of the function yields EML that can be incorporated into the metadata for a data set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cap1985 &lt;-<span class="st"> </span><span class="kw">create_spatialRaster</span>(<span class="st">'~/knb-lter-cap.650.1/CAP 30m Landsat Series Submit/'</span>,
                                <span class="st">'~/knb-lter-cap.650.1/rasterMetadataFiles/CAP1985_metadata.csv'</span>,
                                <span class="st">'~/knb-lter-cap.650.1/rasterMetadataFiles/landsat_factors.csv'</span>)</code></pre></div>
<div id="helper-functions" class="section level3">
<h3>helper functions</h3>
<p>create_spatialRaster calls two helper functions: get_emlProjection and zipRelatedFiles.</p>
<div id="get_emlprojection" class="section level4">
<h4>get_emlProjection</h4>
<p>EML requires projection data be included with raster metadata, and the projection details must be in a specific string form <a href="https://knb.ecoinformatics.org/#external//emlparser/docs/eml-2.1.1/./eml-spatialReference.html">valid EML CRS</a>. get_emlProjection attempts to identify the projection of a raster based on metadata inherent in the file and match it to the appropriate projection permissible by EML. If a match is not found, the string “METADATA_NOT_AVAILABLE” is returned in the resulting EML and must be edited manually.</p>
</div>
<div id="ziprelatedfiles" class="section level4">
<h4>zipRelatedFiles</h4>
<p>Raster data typically consist of a single file (e.g., *.img, *.rrd) but are often accompanied by metadata (often in xml format) or other ancillary, supporting files. zipRelatedFiles attempts to identify any related files based on a common file name. For example, the raster <code>CAP_1985.img</code> is a raster file but has accompanying metadata/ancillary files titled <code>CAP_1985.aux.xml</code> and <code>CAP_1985.img.clr</code>. zipRelatedFiles will search the provided directory location for any files with the base name <code>CAP_1985</code>. All files with that base name will be transferred to a new directory and zipped into a single entity.</p>
</div>
</div>
<div id="output" class="section level3">
<h3>output</h3>
<p>If all requisite metadata were provided and the get_emlProjection function successfully identified the raster project, the create_spatialRaster function yields an EML-compliant object of type spatialRaster per the <a href="https://github.com/ropensci/EML">ropensci EML package</a>. The object name will include the <code>project id (identified in the working environment) + the base name of the raster + the md5sum of the raster + the file extension of the raster</code>. In the case where multiple files with a common base name were identified by zipRelatedFiles, the object will be of type <code>zip</code>.</p>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
